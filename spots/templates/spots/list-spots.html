{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load crispy_forms_filters %}

{% block title %}
    Spot List
{% endblock %}

{% block content %}
    {% for spot in spots %}
        <div class="card border-green mb-3 bg-dark">
            <img src="{{ spot.photo.url }}" class="card-img-top" alt="spot photo">
            <div class="card-body text-green border-top-green">
                <h5 class="card-title">{{ spot.name }}</h5>
                {% if user.is_authenticated %}
                    <a href="{% url 'spots:like' pk=spot.pk %}">
                        {% if spot.pk in liked_spots %}
                            <img src="{% static 'images/heasrt2.png' %}" alt="heart" height="40" width="40">
                        {% else %}
                            <img src="{% static 'images/empty-heart.png' %}" alt="heart" height="40" width="40">
                        {% endif %}
                    </a>
                {% endif %}
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item bg-dark text-green border-bottom-green">
                    Province: {{ spot.province }}
                </li>
                <li class="list-group-item bg-dark text-green border-bottom-green">
                    Latitude: {{ spot.latitude }}
                </li>
                <li class="list-group-item bg-dark text-green">
                    Longitude: {{ spot.longitude }}
                </li>
            </ul>
            <div class="card-body bg-dark text-green">
                <a href="https://maps.google.com/?q={{ spot.latitude }}, {{ spot.longitude }}"
                   class="nav-link text-green">
                    Search on Google Maps
                </a>
            </div>
            {% if user.is_authenticated %}
                {% if user == spot.user or user.is_superuser %}
                    <div class="card-body bg-dark border-top-green">
                        <a href="{% url 'spots:update' pk=spot.pk %}" class="btn btn-outline-green">Update</a>
                    </div>
                    <div class="card-body bg-dark border-top-green">
                        <a href="{% url 'spots:delete' pk=spot.pk %}" class="btn btn-danger">Delete</a>
                    </div>
                {% endif %}
            {% endif %}
        </div>
    {% empty %}
        <div class="row">
            <h2 class="text-green">No Spots</h2>
        </div>
    {% endfor %}
{% endblock %}
